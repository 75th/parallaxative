"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _get=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,r)}if("value"in s)return s.value;var n=s.get;if(void 0!==n)return n.call(r)},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),ScrollDetector=exports.ScrollDetector=function(){function t(e,i){var r=this;_classCallCheck(this,t);var s={scrollIsVertical:!0};this.scrollTarget=e,i=Object.assign({},s,i),Object.getOwnPropertyNames(i).forEach(function(t){r[t]=i[t]})}return _createClass(t,[{key:"relativeScrollPosition",value:function t(){var e,i,r,s,a=this.scrollTarget.getBoundingClientRect();this.scrollIsVertical?(s=this.getVerticalScroll(),e=a.top+s,i=a.height,r=window.innerHeight):(s=this.getHorizontalScroll(),e=a.left+s,i=a.width,r=window.innerWidth);var n=e-r;return(s-n)/(e+i-n)}},{key:"clampedRelativeScrollPosition",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.relativeScrollPosition();return Math.min(Math.max(e,0),1)}},{key:"getVerticalScroll",value:function t(){return"scrollY"in window?window.scrollY:"pageYOffset"in window?window.pageYOffset:document.documentElement.scrollTop>0?document.documentElement.scrollTop:document.body.scrollTop}},{key:"getHorizontalScroll",value:function t(){return"scrollX"in window?window.scrollX:"pageXOffset"in window?window.pageXOffset:document.documentElement.scrollLeft>0?document.documentElement.scrollLeft:document.body.scrollLeft}}]),t}(),ScrollAnimationValueSet=exports.ScrollAnimationValueSet=function(){function t(e){var i=this;_classCallCheck(this,t);var r={unit:"vh",valueFormat:"translate3d(0, _, 0)",substitutionString:"_",startValue:20,endValue:-20,resetValue:0};e=Object.assign({},r,e),Object.getOwnPropertyNames(e).forEach(function(t){i[t]=e[t]})}return _createClass(t,[{key:"getCSSValue",value:function t(e){return this.valueFormat.replace(this.substitutionString,((this.endValue-this.startValue)*e+this.startValue).toString()+this.unit)}}]),t}(),ScrollAnimation=exports.ScrollAnimation=function(){function t(e,i,r){var s=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[new ScrollAnimationValueSet];_classCallCheck(this,t);var n={properties:["transform","msTransform"],valueSetSeparator:", ",removePropertiesOnReset:!0,activeMediaQueryList:window.matchMedia("(min-width: 720px)"),activateImmediately:!0};r=Object.assign({},n,r),Object.getOwnPropertyNames(r).forEach(function(t){s[t]=r[t]}),this.animateTargets=e,this.scrollDetector=i,this.valueSets=a,this.listeners=[],this.ticking=!1,this.activated=!1,this.activateImmediately&&this.respond(),this.activeMediaQueryList.addListener(function(){s.respond()})}return _createClass(t,[{key:"init",value:function t(){var e=this;this.animateTargets.forEach(function(t){t.classList.add("scroll-animated"),e.updateCSS(),e.listeners.push(function(t){var i=e.scrollDetector.relativeScrollPosition();(i>-.1||i<1.1)&&e.requestUpdate(t)}),window.addEventListener("scroll",e.listeners[e.listeners.length-1]),window.addEventListener("resize",e.listeners[e.listeners.length-1])})}},{key:"setCSS",value:function t(e){for(var i=0;i<this.animateTargets.length;i++)for(var r=this.animateTargets[i],s=0;s<this.properties.length;s++){var a=this.properties[s];r.style[a]=e.join(this.valueSetSeparator)}}},{key:"updateCSS",value:function t(){for(var e=[],i=this.scrollDetector.clampedRelativeScrollPosition(),r=this.valueSets.length,s=0;s<r;s++)e.push(this.valueSets[s].getCSSValue(i));this.setCSS(e),this.ticking=!1}},{key:"requestUpdate",value:function t(){var e=this;this.ticking||requestAnimationFrame(function(){e.updateCSS()}),this.ticking=!0}},{key:"reset",value:function t(){var e=this;if(this.removePropertiesOnReset)this.animateTargets.forEach(function(t){e.properties.forEach(function(e){t.style.removeProperty(e)})});else{var i=[];this.valueSets.forEach(function(t){i.push(t.valueFormat.replace(t.substitutionString,t.resetValue.toString()+t.unit))}),this.setCSS(i)}}},{key:"activate",value:function t(){this.activated||(this.init(),this.activated=!0)}},{key:"deactivate",value:function t(){this.activated&&this.listeners.forEach(function(t){window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}),this.reset(),this.activated=!1}},{key:"respond",value:function t(){this.activeMediaQueryList.matches?this.activate():this.deactivate()}}]),t}(),ParallaxAnimationValueSet=exports.ParallaxAnimationValueSet=function t(e){var i=this;_classCallCheck(this,t);var r={valueFormat:"translateY(_)",substitutionString:"_",scrollPixelsPerParallaxPixel:10,resetValue:0};if(e=Object.assign({},r,e),Object.getOwnPropertyNames(e).forEach(function(t){i[t]=e[t]}),this.scrollPixelsPerParallaxPixel<=0)throw"scrollPixelsPerParallaxPixel must be greater than zero."},ParallaxAnimation=exports.ParallaxAnimation=function(t){function e(t,i,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[new ParallaxAnimationValueSet];return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,r,s))}return _inherits(e,t),_createClass(e,[{key:"init",value:function t(){var i={size:"width",Size:"Width",offset:"left"},r={size:"height",Size:"Height",offset:"top"};this.dimensions=this.scrollDetector.scrollIsVertical?r:i,this.updateResizeProperties(),_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.updateResizeCSS(),this.animateTargets.forEach(function(t){t.classList.add("parallax-animated")}),this.scrollDetector.scrollTarget.classList.add("parallax-container")}},{key:"updateCSS",value:function t(){for(var e=this.scrollDetector.clampedRelativeScrollPosition(),i=[],r=this.valueSets.length,s=0;s<r;s++){var a=-(this.scrollTargetSize-this.valueSets[s].parallaxSize)*e;i.push(this.valueSets[s].valueFormat.replace(this.valueSets[s].substitutionString,a.toString()+"px"))}this.setCSS(i),this.ticking=!1}},{key:"updateResizeProperties",value:function t(){this.scrollTargetRect=this.scrollDetector.scrollTarget.getBoundingClientRect(),this.scrollTargetSize=this.scrollTargetRect[this.dimensions.size],this.scrollDistance=this.scrollTargetSize+window["inner"+this.dimensions.Size];for(var e=this.valueSets.length,i=0;i<e;i++)this.valueSets[i].parallaxSize=this.scrollDistance-this.scrollDistance/this.valueSets[i].scrollPixelsPerParallaxPixel+this.scrollTargetSize}},{key:"updateResizeCSS",value:function t(){this.updateResizeProperties();for(var e=this.valueSets.length,i=this.animateTargets.length,r=0;r<e;r++)for(var s=0;s<i;s++)this.animateTargets[s].style[this.dimensions.size]=this.valueSets[r].parallaxSize.toString()+"px"}},{key:"requestUpdate",value:function t(e){var i=this;this.ticking||requestAnimationFrame(function(){i.updateCSS(),"resize"===e.type&&i.updateResizeCSS()}),this.ticking=!0}}]),e}(ScrollAnimation);
//# sourceMappingURL=./parallaxative.min.js.map