"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ScrollerAnimationValueSet=function t(e){var i=this;_classCallCheck(this,t);var n={unit:"vh",valueFormat:"translateY(_)",substitutionString:"_",startValue:20,endValue:-20,resetValue:0};e=Object.assign({},n,e),Object.getOwnPropertyNames(e).forEach(function(t){i[t]=e[t]})},ScrollerAnimation=function(){function t(e,i,n){_classCallCheck(this,t);var o={properties:["transform","msTransform"],valueSetSeparator:", ",removePropertyOnReset:!0};void 0!==n&&n.length||(n=[new ScrollerAnimationValueSet]),this.options=Object.assign({},o,i),this.valueSets=n,this.animateTargets=e,this.listeners=[],this.ticking=!1,this.scrollPosition=.5}return _createClass(t,[{key:"setCSS",value:function t(e){var i=this;this.animateTargets.forEach(function(t){i.options.properties.forEach(function(n){t.style[n]=e.join(i.options.valueSetSeparator)})})}},{key:"updateCSS",value:function t(){var e=this,i=[];this.valueSets.forEach(function(t){i.push(t.valueFormat.replace(t.substitutionString,((t.endValue-t.startValue)*e.scrollPosition+t.startValue).toString()+t.unit))}),this.setCSS(i),this.ticking=!1}},{key:"requestUpdate",value:function t(e){var i=this;this.ticking||(this.scrollPosition=e,requestAnimationFrame(function(){i.updateCSS()})),this.ticking=!0}},{key:"reset",value:function t(){var e=this;if(this.removePropertyOnReset)this.animateTargets.forEach(function(t){e.options.properties.forEach(function(e){t.style.removeProperty(e)})});else{var i=[];this.valueSets.forEach(function(t){i.push(t.valueFormat.replace(t.substitutionString,t.resetValue.toString()+t.unit))}),this.setCSS(i)}}}]),t}(),Scroller=function(){function t(e,i,n){var o=this;_classCallCheck(this,t);var s={scrollIsVertical:!0,activeMediaQueryList:window.matchMedia("(min-width: 720px)")};void 0===n&&(n=[]),this.scrollTarget=e,this.animations=n,this.options=Object.assign({},s,i),this.activated=!1,this.respond(),this.options.activeMediaQueryList.addListener(function(){o.respond()})}return _createClass(t,[{key:"relativeScrollPosition",value:function t(){var e,i,n,o,s,a=this.scrollTarget.getBoundingClientRect();this.options.scrollIsVertical?(s="scrollY"in window?window.scrollY:"pageYOffset"in window?window.pageYOffset:document.documentElement.scrollTop>0?document.documentElement.scrollTop:document.body.scrollTop,e=a.top+s,i=a.height,n=window.innerHeight,o=window.pageYOffset):(s="scrollX"in window?window.scrollX:"pageXOffset"in window?window.pageXOffset:document.documentElement.scrollLeft>0?document.documentElement.scrollLeft:document.body.scrollLeft,e=a.left+s,i=a.width,n=window.innerWidth,o=window.pageXOffset);var r=e-n;return(o-r)/(e+i-r)}},{key:"clampedRelativeScrollPosition",value:function t(e){return void 0===e&&(e=this.relativeScrollPosition()),Math.min(Math.max(e,0),1)}},{key:"setUpAnimations",value:function t(){var e=this;this.animations.forEach(function(t){t.animateTargets.forEach(function(i){i.classList.add("scroll-animated"),t.updateCSS(e.clampedRelativeScrollPosition()),t.listeners.push(function(){var i=e.relativeScrollPosition();(i>-.1||i<1.1)&&t.requestUpdate(e.clampedRelativeScrollPosition(i))}),window.addEventListener("scroll",t.listeners[t.listeners.length-1])})})}},{key:"activate",value:function t(){this.activated||(this.setUpAnimations(),this.activated=!0)}},{key:"deactivate",value:function t(){this.activated&&(this.animations.forEach(function(t){t.listeners.forEach(function(t){window.removeEventListener("scroll",t)}),t.reset()}),this.activated=!1)}},{key:"respond",value:function t(){this.options.activeMediaQueryList.matches?this.activate():this.deactivate()}}]),t}();
//# sourceMappingURL=./scroller.min.js.map