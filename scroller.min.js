"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ScrollAnimationValueSet=function t(e){var i=this;_classCallCheck(this,t);var n={unit:"vh",valueFormat:"translateY(_)",substitutionString:"_",startValue:20,endValue:-20,resetValue:0};e=Object.assign({},n,e),Object.getOwnPropertyNames(e).forEach(function(t){i[t]=e[t]})},ScrollAnimation=function(){function t(e,i,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[new ScrollAnimationValueSet];_classCallCheck(this,t);var s={properties:["transform","msTransform"],valueSetSeparator:", ",removePropertiesOnReset:!0,activeMediaQueryList:window.matchMedia("(min-width: 720px)"),activateImmediately:!0};n=Object.assign({},s,n),Object.getOwnPropertyNames(n).forEach(function(t){a[t]=n[t]}),this.animateTargets=e,this.scrollDetector=i,this.valueSets=r,this.listeners=[],this.ticking=!1,this.activated=!1,this.activateImmediately&&this.respond(),this.activeMediaQueryList.addListener(function(){a.respond()})}return _createClass(t,[{key:"init",value:function t(){var e=this;this.animateTargets.forEach(function(t){t.classList.add("scroll-animated"),e.updateCSS(),e.listeners.push(function(){var t=e.scrollDetector.relativeScrollPosition();(t>-.1||t<1.1)&&e.requestUpdate()}),window.addEventListener("scroll",e.listeners[e.listeners.length-1])})}},{key:"setCSS",value:function t(e){var i=this;this.animateTargets.forEach(function(t){i.properties.forEach(function(n){t.style[n]=e.join(i.valueSetSeparator)})})}},{key:"updateCSS",value:function t(){var e=[],i=this.scrollDetector.clampedRelativeScrollPosition();this.valueSets.forEach(function(t){e.push(t.valueFormat.replace(t.substitutionString,((t.endValue-t.startValue)*i+t.startValue).toString()+"px"))}),this.setCSS(e),this.ticking=!1}},{key:"requestUpdate",value:function t(){var e=this;this.ticking||requestAnimationFrame(function(){e.updateCSS()}),this.ticking=!0}},{key:"reset",value:function t(){var e=this;if(this.removePropertiesOnReset)this.animateTargets.forEach(function(t){e.properties.forEach(function(e){t.style.removeProperty(e)})});else{var i=[];this.valueSets.forEach(function(t){i.push(t.valueFormat.replace(t.substitutionString,t.resetValue.toString()+t.unit))}),this.setCSS(i)}}},{key:"activate",value:function t(){this.activated||(this.init(),this.activated=!0)}},{key:"deactivate",value:function t(){this.activated&&this.listeners.forEach(function(t){window.removeEventListener("scroll",t)}),this.reset(),this.activated=!1}},{key:"respond",value:function t(){this.activeMediaQueryList.matches?this.activate():this.deactivate()}}]),t}(),ScrollDetector=function(){function t(e,i){var n=this;_classCallCheck(this,t);var a={scrollIsVertical:!0};this.scrollTarget=e,i=Object.assign({},a,i),Object.getOwnPropertyNames(i).forEach(function(t){n[t]=i[t]})}return _createClass(t,[{key:"relativeScrollPosition",value:function t(){var e,i,n,a,r,s=this.scrollTarget.getBoundingClientRect();this.scrollIsVertical?(r=this.getVerticalScroll(),e=s.top+r,i=s.height,n=window.innerHeight,a=window.pageYOffset):(r=this.getHorizontalScroll(),e=s.left+r,i=s.width,n=window.innerWidth,a=window.pageXOffset);var o=e-n;return(a-o)/(e+i-o)}},{key:"clampedRelativeScrollPosition",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.relativeScrollPosition();return Math.min(Math.max(e,0),1)}},{key:"getVerticalScroll",value:function t(){return"scrollY"in window?window.scrollY:"pageYOffset"in window?window.pageYOffset:document.documentElement.scrollTop>0?document.documentElement.scrollTop:document.body.scrollTop}},{key:"getHorizontalScroll",value:function t(){return"scrollX"in window?window.scrollX:"pageXOffset"in window?window.pageXOffset:document.documentElement.scrollLeft>0?document.documentElement.scrollLeft:document.body.scrollLeft}}]),t}();
//# sourceMappingURL=./scroller.min.js.map