var parallaxative=function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(i):a.value}})(t,e,i||t)}function c(t){return"string"==typeof t.properties&&(t.properties=[t.properties]),"object"===e(t.valueSets)&&(t.valueSets instanceof p||t.valueSets instanceof y)&&(t.valueSets=[t.valueSets]),t}function u(t){if(t instanceof MediaQueryList||null===t)return t;if("string"==typeof t&&t)return window.matchMedia(t);throw new f(c,"badActiveMediaQueryList")}function h(t){if(t instanceof HTMLElement)return t;if("string"==typeof t){if(!(t=document.querySelector(t)))throw new f(h,"emptySelectorQuery");return t}throw new f(h,"badDOMElement")}function d(t,i){if(!(t instanceof v))if(void 0!==t&&t){if("string"==typeof t||t instanceof HTMLElement){var r=h(t);t=new v(r)}else if("object"===e(t)){if(void 0===(a=t).scrollIsVertical&&void 0===a.scrollTarget)throw new f(null,"optionsNotForScrollDetector",{},console.warn||function(){});t=new v(i,t)}}else t=new v(i);var a;return t}var f=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.error||function(){};switch(i(this,t),this.throwingFunction=e,this.type=r,this.data=a,!0){case e===v&&"badScrollTarget"===r:s("scrollTarget must be a query selector string or an HTMLElement node.");break;case e===v&&"scrollTargetQueryNull"===r:s("scrollTarget query selector string did not match any elements.");break;case e===v&&"scrollTargetEmpty"===r:s("scrollTarget was not provided, was empty, or did not resolve to a DOM element.");break;case e===g&&"noTriggerElement"===r:s("You must provide ScrollTarget either a scrollDetector or a triggerTarget.");break;case"badActiveMediaQueryList"===r:s("activeMediaQueryList, if provided at all, must be either a media query string or a MediaQueryList instance.");break;case"duplicateOptions"===r:s("ScrollAnimation’s second parameter looked like it was options for ScrollAnimation, but other options were provided in the third parameter. If the third parameter is present, the second parameter must pertain to a ScrollDetector.");break;case e===y&&"divideByZero"===r:s("scrollPixelsPerParallaxPixel must not be zero.");break;case e===S&&"overlyNestedAnimateTarget"===r:s("Parallax animateTarget %o is nested too many levels beneath scrollTarget %o. The animateTarget must be a direct child of the scrollTarget.",a.animateTarget,a.scrollTarget);break;case"badDOMElement"===r:s("A Parallaxative class couldn’t convert your input into an HTMLElement");break;case"emptySelectorQuery"===r:s("Your query selector didn’t match any DOM elements.");break;case"optionsNotForScrollDetector"===r:s("Options in a scrollDetector parameter were not for a scrollDetector and were not detected to be for something else.");break;case"unhandledExceptionType"===r:s("The previous error was not handled specifically (with plain English error text). This is the Parallaxative developer’s fault, and you should yell at him at https://github.com/75th/parallaxative/issues");break;default:throw s("Error in Parallaxative class %o of type %o with data %o.",e,r,a),new t(this.constructor,"unhandledExceptionType")}},v=function(){function t(e){var r=this;i(this,t),this.defaultOptions={scrollTarget:null,scrollIsVertical:!0},e=this.validateOptions(e),Object.getOwnPropertyNames(this.defaultOptions).forEach(function(t){r[t]=e[t]}),this.updateResizeProperties(),window.addEventListener("resize",this.updateResizeProperties),window.addEventListener("load",this.updateResizeProperties)}return a(t,[{key:"updateResizeProperties",value:function(){this.rect=this.scrollTarget.getBoundingClientRect(),this.documentOffsets={top:this.rect.top+this.constructor.getVerticalScroll(),left:this.rect.left+this.constructor.getHorizontalScroll()},this.windowSizes={width:window.innerWidth,height:window.innerHeight}}},{key:"validateOptions",value:function(t){if((t instanceof HTMLElement||"string"==typeof t)&&(t={scrollTarget:t}),"string"==typeof t.scrollTarget&&(t.scrollTarget=h(t.scrollTarget)),!(t.scrollTarget instanceof HTMLElement))throw new f(this.constructor,"badScrollTarget");return Object.assign({},this.defaultOptions,t)}},{key:"relativeScrollPosition",value:function(){var t,e,i,r,a;return this.scrollIsVertical?(r=this.constructor.getVerticalScroll(),t=this.documentOffsets.top,e=this.rect.height,i=this.windowSizes.height):(r=this.constructor.getHorizontalScroll(),t=this.documentOffsets.left,e=this.rect.width,i=this.windowSizes.width),(r-(a=t-i))/(t+e-a)}},{key:"clampedRelativeScrollPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.relativeScrollPosition();return Math.min(Math.max(t,0),1)}}],[{key:"getVerticalScroll",value:function(){return"scrollY"in window?window.scrollY:"pageYOffset"in window?window.pageYOffset:document.documentElement.scrollTop>0?document.documentElement.scrollTop:document.body.scrollTop}},{key:"getHorizontalScroll",value:function(){return"scrollX"in window?window.scrollX:"pageXOffset"in window?window.pageXOffset:document.documentElement.scrollLeft>0?document.documentElement.scrollLeft:document.body.scrollLeft}}]),t}(),g=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),r=this.validateOptions(r),this.defaultOptions={activateImmediately:!0,activeMediaQueryList:"(min-width: 720px)",scrollDetector:null,triggerFunction:function(t){t.classList.remove("offscreen")},triggerPosition:.15,triggerTarget:null,triggerOnDeactivate:!0},Object.getOwnPropertyNames(this.defaultOptions).forEach(function(t){e[t]=r[t]}),this.activeMediaQueryList.addListener(this.respond),this.activateImmediately&&this.respond()}return a(t,[{key:"validateOptions",value:function(t){var e=void 0===t.scrollDetector||!!t.scrollDetector,i=void 0===t.triggerTarget||!!t.triggerTarget;if(e&&i)throw new f(this.constructor,"noTriggerElement");return e?(t.triggerTarget=h(t.triggerTarget),t.scrollDetector=new v(t.triggerTarget)):i&&(t.scrollDetector=d(t.scrollDetector,null),t.triggerTarget=t.scrollDetector.scrollTarget),(t=Object.assign({},this.defaultOptions,t)).activeMediaQueryList=u(t.activeMediaQueryList),t}},{key:"init",value:function(){var t=this;this.listener=function(){var e=t.scrollDetector.relativeScrollPosition();e>-.1&&e<1.1&&t.requestUpdate()},this.listener(),window.addEventListener("scroll",this.listener),window.addEventListener("resize",this.listener)}},{key:"trigger",value:function(){this.triggerFunction(this.triggerTarget)}},{key:"test",value:function(){this.scrollDetector.relativeScrollPosition()>this.triggerPosition&&(this.triggerOnDeactivate=!0,this.deactivate()),this.ticking=!1}},{key:"requestUpdate",value:function(){var t=this;this.ticking||requestAnimationFrame(function(){t.test()}),this.ticking=!0}},{key:"activate",value:function(){this.activated||(this.init(),this.activated=!0)}},{key:"deactivate",value:function(){this.activated&&(window.removeEventListener("scroll",this.listener),window.removeEventListener("resize",this.listener),this.triggerOnDeactivate&&this.trigger()),this.activated=!1}},{key:"respond",value:function(){this.activeMediaQueryList.matches?this.activate():this.deactivate()}}]),t}(),p=function(){function t(e){var r=this;i(this,t);e=Object.assign({},{unit:"vh",valueFormat:"translate3d(0px, _, 0px)",substitutionString:"_",startValue:20,endValue:-20,resetValue:0},e),Object.getOwnPropertyNames(e).forEach(function(t){r[t]=e[t]})}return a(t,[{key:"getCSSValue",value:function(t){return this.valueFormat.replace(this.substitutionString,((this.endValue-this.startValue)*t+this.startValue).toString()+this.unit)}}]),t}(),m=function(){function t(e,r,a){var s=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[new p];i(this,t);var o={properties:["transform","msTransform"],valueSets:n,valueSetSeparator:" ",removePropertiesOnReset:!0,activeMediaQueryList:window.matchMedia("(min-width: 720px)"),activateImmediately:!0,startPosition:0,endPosition:1};e instanceof HTMLElement?e=[e]:"string"==typeof e&&(e=Array.from(document.querySelectorAll(e)));try{r=d(r,e[0].parentNode)}catch(t){if("optionsNotForScrollDetector"===t.type){if(void 0!==a)throw new f(this.constructor,"duplicateOptions");a=r,r=new v(e[0].parentNode)}}void 0!==a&&(a=c(a,this.constructor)),a=Object.assign({},o,a),Object.getOwnPropertyNames(o).forEach(function(t){s[t]=a[t]}),this.animateTargets=e,this.scrollDetector=r,this.listeners=[],this.ticking=!1,this.activated=!1,this.activateImmediately&&this.respond(),this.activeMediaQueryList.addListener(this.respond)}return a(t,[{key:"init",value:function(){var t=this;this.animateTargets.forEach(function(e){e.classList.add("scroll-animated"),t.updateCSS(),t.listeners.push(function(e){var i=t.scrollDetector.relativeScrollPosition();i>-.1&&i<1.1&&t.requestUpdate(e)}),window.addEventListener("scroll",t.listeners[t.listeners.length-1]),window.addEventListener("resize",t.listeners[t.listeners.length-1])})}},{key:"setCSS",value:function(t){for(var e=0;e<this.animateTargets.length;e++)for(var i=this.animateTargets[e],r=0;r<this.properties.length;r++){var a=this.properties[r];i.style[a]=t.join(this.valueSetSeparator)}}},{key:"updateCSS",value:function(){this.ticking=!1;for(var t=[],e=this.scrollDetector.clampedRelativeScrollPosition(),i=this.valueSets.length,r=0;r<i;r++)t.push(this.valueSets[r].getCSSValue(e));this.setCSS(t)}},{key:"requestUpdate",value:function(){var t=this;this.ticking||requestAnimationFrame(function(){t.updateCSS()}),this.ticking=!0}},{key:"reset",value:function(){var t,e=this;if(this.removePropertiesOnReset)this.animateTargets.forEach(function(t){e.properties.forEach(function(e){t.style.removeProperty(e)})});else{var i=[];this.valueSets.forEach(function(t){i.push(t.valueFormat.replace(t.substitutionString,t.resetValue.toString()+t.unit))}),this.setCSS(i)}var r=this.animateTargets.length;for(t=0;t<r;t++)this.animateTargets[t].classList.remove("scroll-animated")}},{key:"activate",value:function(){this.activated||(this.init(),this.activated=!0)}},{key:"deactivate",value:function(){this.activated&&this.listeners.forEach(function(t){window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}),this.reset(),this.activated=!1}},{key:"respond",value:function(){this.activeMediaQueryList.matches?this.activate():this.deactivate()}}],[{key:"isIE",value:function(){return"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)}}]),t}(),y=function t(e){var r=this;i(this,t);var a={valueFormat:"translate3d(0px, _, 0px)",substitutionString:"_",scrollPixelsPerParallaxPixel:10,resetValue:0};if(e=Object.assign({},a,e),Object.getOwnPropertyNames(a).forEach(function(t){r[t]=e[t]}),0===this.scrollPixelsPerParallaxPixel)throw new f(this.constructor,"divideByZero")},S=function(t){function e(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[new y];return i(this,e),o(this,s(e).call(this,t,r,a,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(e,m),a(e,[{key:"init",value:function(){var t,i,r=this;this.dimensions=this.scrollDetector.scrollIsVertical?{size:"height",Size:"Height",offset:"top"}:{size:"width",Size:"Width",offset:"left"},this.updateResizeProperties(),l(s(e.prototype),"init",this).call(this),this.scrollDetector.scrollTarget.classList.add("parallax-container"),window.addEventListener("load",function(){r.updateResizeCSS(),r.updateCSS()});var a=this.animateTargets.length;try{for(t=0;t<a;t++)if((i=this.animateTargets[t]).classList.add("parallax-animated"),i.parentNode!==this.scrollDetector.scrollTarget)throw new f(this.constructor,"overlyNestedAnimateTarget",{index:t,animateTarget:i,scrollTarget:this.scrollDetector.scrollTarget})}catch(t){this.deactivate(),this.animateTargets=this.animateTargets.filter(function(e){t.animateTarget}),this.animateTargets.length&&this.activate()}}},{key:"updateCSS",value:function(){for(var t=this.scrollDetector.clampedRelativeScrollPosition(),e=[],i=this.valueSets.length,r=0;r<i;r++){var a;a=this.valueSets[r].scrollPixelsPerParallaxPixel<0?-(this.scrollTargetSize-this.valueSets[r].parallaxSize)*(1-t):-(this.scrollTargetSize-this.valueSets[r].parallaxSize)*t,e.push(this.valueSets[r].valueFormat.replace(this.valueSets[r].substitutionString,a.toString()+"px"))}this.setCSS(e),this.ticking=!1}},{key:"updateResizeProperties",value:function(){this.scrollTargetRect=this.scrollDetector.scrollTarget.getBoundingClientRect(),this.scrollTargetSize=this.scrollTargetRect[this.dimensions.size],this.scrollDistance=this.scrollTargetSize+window["inner"+this.dimensions.Size];for(var t=this.valueSets.length,e=0;e<t;e++)this.valueSets[e].parallaxSize=Math.abs(this.scrollDistance/this.valueSets[e].scrollPixelsPerParallaxPixel)+this.scrollTargetSize}},{key:"updateResizeCSS",value:function(){this.updateResizeProperties();for(var t=this.valueSets.length,e=this.animateTargets.length,i=0;i<t;i++)for(var r=0;r<e;r++)this.animateTargets[r].style[this.dimensions.size]=this.valueSets[i].parallaxSize.toString()+"px"}},{key:"requestUpdate",value:function(t){var e=this;this.ticking||requestAnimationFrame(function(){e.updateCSS(),"resize"===t.type&&e.updateResizeCSS()}),this.ticking=!0}},{key:"reset",value:function(){var t,i=this.animateTargets.length;for(t=0;t<i;t++)this.animateTargets[t].style.removeProperty("height"),this.animateTargets[t].classList.remove("parallax-animated"),this.animateTargets[t].parentNode.classList.remove("parallax-anchor");l(s(e.prototype),"reset",this).call(this),this.scrollDetector.scrollTarget.classList.remove("parallax-container")}}]),e}();return t.ScrollDetector=v,t.ScrollTrigger=g,t.ScrollAnimation=m,t.ScrollAnimationValueSet=p,t.ParallaxAnimation=S,t.ParallaxAnimationValueSet=y,t}({});
//# sourceMappingURL=parallaxative.min.js.map