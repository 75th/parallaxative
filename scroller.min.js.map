{"version":3,"sources":["scroller.js"],"names":["ScrollAnimationValueSet","options","_this","this","_classCallCheck","defaultOptions","unit","valueFormat","substitutionString","startValue","endValue","resetValue","Object","assign","getOwnPropertyNames","forEach","name","ScrollAnimation","animateTargets","scrollDetector","valueSets","_this2","properties","valueSetSeparator","removePropertyOnReset","activeMediaQueryList","window","matchMedia","activateImmediately","length","listeners","ticking","activated","respond","addListener","_this3","animateTarget","classList","add","updateCSS","push","relativeScrollPosition","requestUpdate","addEventListener","cssValues","_this4","animateProperty","style","join","scrollPosition","clampedRelativeScrollPosition","valueSet","replace","toString","setCSS","_this5","requestAnimationFrame","_this6","property","removeProperty","init","listener","removeEventListener","reset","matches","activate","deactivate","ScrollDetector","scrollTarget","_this7","scrollIsVertical","offset","size","windowSize","scrollPos","scroll","rect","getBoundingClientRect","scrollY","pageYOffset","document","documentElement","scrollTop","body","top","height","innerHeight","scrollX","pageXOffset","scrollLeft","left","width","innerWidth","zeroPoint","arguments","undefined","Math","min","max"],"mappings":"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","file":"scroller.min.js","sourcesContent":["class ScrollAnimationValueSet {\n\tconstructor(options) {\n\t\tvar defaultOptions = {\n\t\t\tunit: 'vh',\n\t\t\tvalueFormat: 'translateY(_)',\n\t\t\tsubstitutionString: '_',\n\t\t\tstartValue: 20,\n\t\t\tendValue: -20,\n\t\t\tresetValue: 0\n\t\t};\n\n\t\toptions = Object.assign({}, defaultOptions, options);\n\n\t\tObject.getOwnPropertyNames(options).forEach(name => {\n\t\t\tthis[name] = options[name];\n\t\t});\n\t}\n}\n\nclass ScrollAnimation {\n\tconstructor(animateTargets, scrollDetector, options, valueSets) {\n\t\tvar defaultOptions = {\n\t\t\tproperties: ['transform', 'msTransform'],\n\t\t\tvalueSetSeparator: ', ',\n\t\t\tremovePropertyOnReset: true,\n\t\t\tactiveMediaQueryList: window.matchMedia('(min-width: 720px)'),\n\t\t\tactivateImmediately: true\n\t\t};\n\n\t\toptions = Object.assign({}, defaultOptions, options);\n\n\t\tObject.getOwnPropertyNames(options).forEach(name => {\n\t\t\tthis[name] = options[name];\n\t\t});\n\n\t\tif(typeof valueSets === 'undefined' || !valueSets.length) {\n\t\t\tvalueSets = [ new ScrollAnimationValueSet ];\n\t\t}\n\n\t\tthis.animateTargets = animateTargets;\n\t\tthis.scrollDetector = scrollDetector;\n\t\tthis.valueSets = valueSets;\n\t\tthis.listeners = [];\n\t\tthis.ticking = false;\n\t\tthis.activated = false;\n\n\t\tif(this.activateImmediately) {\n\t\t\tthis.respond();\n\t\t}\n\n\t\tthis.activeMediaQueryList.addListener(() => {\n\t\t\tthis.respond();\n\t\t});\n\t}\n\n\tinit() {\n\t\tthis.animateTargets.forEach(animateTarget => {\n\t\t\tanimateTarget.classList.add('scroll-animated');\n\t\t\tthis.updateCSS();\n\n\t\t\tthis.listeners.push(() => {\n\t\t\t\tvar relativeScrollPosition = this.scrollDetector.relativeScrollPosition();\n\t\t\t\tif(relativeScrollPosition > -0.1 || relativeScrollPosition < 1.1) {\n\t\t\t\t\tthis.requestUpdate();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\twindow.addEventListener('scroll', this.listeners[this.listeners.length - 1]);\n\t\t});\n\t}\n\n\tsetCSS(cssValues) {\n\t\tthis.animateTargets.forEach(animateTarget => {\n\t\t\tthis.properties.forEach(animateProperty => {\n\t\t\t\tanimateTarget.style[animateProperty] = cssValues.join(this.valueSetSeparator);\n\t\t\t});\n\t\t});\n\t}\n\n\tupdateCSS() {\n\t\tvar cssValues = [];\n\n\t\tvar scrollPosition = this.scrollDetector.clampedRelativeScrollPosition();\n\n\t\tthis.valueSets.forEach(valueSet => {\n\t\t\tcssValues.push(\n\t\t\t\tvalueSet.valueFormat.replace(valueSet.substitutionString, ((valueSet.endValue - valueSet.startValue) * scrollPosition + valueSet.startValue).toString() + valueSet.unit)\n\t\t\t);\n\t\t});\n\n\t\tthis.setCSS(cssValues);\n\t\tthis.ticking = false;\n\t}\n\n\trequestUpdate() {\n\t\tif(!this.ticking) {\n\t\t\trequestAnimationFrame(() => { this.updateCSS() });\n\t\t}\n\n\t\tthis.ticking = true;\n\t}\n\n\treset() {\n\t\tif(this.removePropertyOnReset) {\n\t\t\tthis.animateTargets.forEach(animateTarget => {\n\t\t\t\tthis.properties.forEach(property => {\n\t\t\t\t\tanimateTarget.style.removeProperty(property)\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tvar cssValues = [];\n\n\t\t\tthis.valueSets.forEach(valueSet => {\n\t\t\t\tcssValues.push(\n\t\t\t\t\tvalueSet.valueFormat.replace(valueSet.substitutionString, valueSet.resetValue.toString() + valueSet.unit)\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tthis.setCSS(cssValues);\n\t\t}\n\t}\n\n\tactivate() {\n\t\tif(!this.activated) {\n\t\t\tthis.init();\n\t\t\tthis.activated = true;\n\t\t}\n\t}\n\n\tdeactivate() {\n\t\tif(this.activated) {\n\t\t\tthis.listeners.forEach(listener => {\n\t\t\t\twindow.removeEventListener('scroll', listener);\n\t\t\t});\n\t\t}\n\n\t\tthis.reset();\n\t\tthis.activated = false;\n\t}\n\n\trespond() {\n\t\tif(this.activeMediaQueryList.matches) {\n\t\t\tthis.activate();\n\t\t} else {\n\t\t\tthis.deactivate();\n\t\t}\n\t}\n}\n\nclass ScrollDetector {\n\tconstructor(scrollTarget, options) {\n\t\tvar defaultOptions = {\n\t\t\tscrollIsVertical: true\n\t\t};\n\n\t\tthis.scrollTarget = scrollTarget;\n\n\t\toptions = Object.assign({}, defaultOptions, options);\n\n\t\tObject.getOwnPropertyNames(options).forEach(name => {\n\t\t\tthis[name] = options[name];\n\t\t});\n\t}\n\n\trelativeScrollPosition() {\n\t\tvar offset, size, windowSize, scrollPos, scroll;\n\n\t\tvar rect = this.scrollTarget.getBoundingClientRect();\n\n\t\tif(this.scrollIsVertical) {\n\t\t\tif('scrollY' in window) {\n\t\t\t\tscroll = window.scrollY;\n\t\t\t} else if ('pageYOffset' in window) {\n\t\t\t\tscroll = window.pageYOffset;\n\t\t\t} else if (document.documentElement.scrollTop > 0) {\n\t\t\t\tscroll = document.documentElement.scrollTop;\n\t\t\t} else {\n\t\t\t\tscroll = document.body.scrollTop;\n\t\t\t}\n\t\t\toffset = rect.top + scroll;\n\t\t\tsize = rect.height;\n\t\t\twindowSize = window.innerHeight;\n\t\t\tscrollPos = window.pageYOffset;\n\t\t} else {\n\t\t\tif('scrollX' in window) {\n\t\t\t\tscroll = window.scrollX;\n\t\t\t} else if ('pageXOffset' in window) {\n\t\t\t\tscroll = window.pageXOffset;\n\t\t\t} else if (document.documentElement.scrollLeft > 0) {\n\t\t\t\tscroll = document.documentElement.scrollLeft;\n\t\t\t} else {\n\t\t\t\tscroll = document.body.scrollLeft;\n\t\t\t}\n\t\t\toffset = rect.left + scroll;\n\t\t\tsize = rect.width;\n\t\t\twindowSize = window.innerWidth;\n\t\t\tscrollPos = window.pageXOffset;\n\t\t}\n\n\t\tvar zeroPoint = offset - windowSize;\n\t\tvar completePoint = offset + size;\n\t\treturn (scrollPos - zeroPoint) / (completePoint - zeroPoint);\n\t}\n\n\tclampedRelativeScrollPosition(relativeScrollPosition = this.relativeScrollPosition()) {\n\t\treturn Math.min(Math.max(relativeScrollPosition, 0), 1);\n\t}\n}"]}